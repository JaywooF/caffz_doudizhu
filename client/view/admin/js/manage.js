var lib={load:0,refresh:function(){this.load=layer.load(1);$("iframe").attr("src",$("iframe").attr("src"))},screen:function(){if(document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement){var _close=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;_close.call(document)}else{var _elem=document.documentElement;var _open=_elem.requestFullscreen||_elem.webkitRequestFullscreen||_elem.mozRequestFullScreen||_elem.msRequestFullscreen;if(_open){_open.call(_elem)}else{layer.msg("浏览器不支持全屏API或已被禁用！")}}},drop:function(){if($(".dropdown-menu").is(":visible")){$(".dropdown-menu").fadeOut()}else{$(".dropdown-menu").fadeIn()}},toggle:function(){if($(window).width()>767){if($(".skin-black-blue").hasClass("sidebar-collapse")){$(".skin-black-blue").removeClass("sidebar-collapse")}else{$(".skin-black-blue").addClass("sidebar-collapse")}}else{if($(".skin-black-blue").hasClass("sidebar-open")){$(".skin-black-blue").removeClass("sidebar-open")}else{$(".skin-black-blue").addClass("sidebar-open")}}},bar:function(_this){if($(_this).find("span i").hasClass("fa-angle-left")){var _height=$(_this).next().height()+"px";$(".sidebar-menu").find(".fa-angle-down").removeClass("fa-angle-down").addClass("fa-angle-left");$(".sidebar-menu").find(".menu-open").removeClass("menu-open");$(_this).find("span i").removeClass("fa-angle-left").addClass("fa-angle-down");$(_this).next().height(0).addClass("menu-open").animate({height:_height},"fast",function(){$(_this).next().removeAttr("style")})}else{$(_this).find("span i").removeClass("fa-angle-down").addClass("fa-angle-left");$(_this).next().animate({height:"0px"},"fast",function(){$(_this).next().removeClass("menu-open").removeAttr("style")})}},active:function(_this,_src){$(".sidebar-menu").find(".active").removeClass("active");$.type(_this)=="object"&&$(_this).parent().addClass("active");$("iframe").attr("src",_src)},clean:function(_confirm,_path,_token){if(_confirm<1){layer.confirm("确定要清理缓存吗？",{icon:3,btn:["确定","取消"]},function(){lib.clean(1,_path,_token)})}else{this.load=layer.load(1);$.post(_path+"index.php/admin/manage/clean",{token:_token},function(data){layer.close(lib.load);if(data==1){layer.msg("清理缓存成功！",{icon:1})}else if(data==-1){layer.msg("登录已超时！",{icon:4})}else{layer.msg(data,{time:0,btn:["确定"]})}})}},logout:function(_confirm,_path,_token){if(_confirm<1){layer.confirm("确定要退出登录吗？",{icon:3,btn:["确定","取消"]},function(){lib.logout(1,_path,_token)})}else{this.load=layer.load(1);$.post(_path+"index.php/admin/manage/logout",{token:_token},function(data){layer.close(lib.load);if(data==1){layer.msg("退出成功，请稍等...",{icon:16});setTimeout("location.href='"+_path+"index.php/admin/login'",1e3)}else{layer.msg(data,{time:0,btn:["确定"]})}})}}};$(document).ready(function(){$("iframe").on("load",function(){layer.close(lib.load);$(this.contentDocument).click(function(){if($(".dropdown-menu").is(":visible")){$(".dropdown-menu").fadeOut()}else if($(".skin-black-blue").hasClass("sidebar-open")){$(".skin-black-blue").removeClass("sidebar-open")}})})});