var lib={load:0,captcha:function(){$(".login-captcha img").attr("src",$(".login-captcha img").attr("src").replace(/\?.*$/,"?"+Math.random()))},sign:function(_path,_minute){var _account_name=$("input[name='account_name']").val().replace(/^\s+|\s+$/g,"");var _account_pw=$("input[name='account_pw']").val().replace(/^\s+|\s+$/g,"");var _captcha=$("input[name='captcha']").val().replace(/^\s+|\s+$/g,"");if(/[^\x21-\x7e]|[&][#]?[a-zA-Z0-9]+[;]/.test(_account_name)){layer.alert("管理员帐号不符合规范！",{icon:7})}else if(_account_name.length<6||_account_name.length>24){layer.alert("管理员帐号最短6位、最长24位！",{icon:7})}else if(/[^\x21-\x7e]|[&][#]?[a-zA-Z0-9]+[;]/.test(_account_pw)){layer.alert("登录密码不符合规范！",{icon:7})}else if(_account_pw.length<6||_account_pw.length>24){layer.alert("登录密码最短6位、最长24位！",{icon:7})}else if(/[^a-z0-9]/i.test(_captcha)||_captcha.length!=4){layer.alert("图形验证码不符合规范！",{icon:7})}else{this.load=layer.load(1);$.post(_path+"index.php/admin/login/sign",{account_name:_account_name,account_pw:_account_pw,captcha:_captcha},function(data){layer.close(lib.load);if(data==1){layer.msg("登录成功，请稍等...",{icon:16});setTimeout("top.location.href='"+_path+"index.php/admin/manage'",1e3)}else if(data==-1){layer.msg("帐号与密码不匹配！",{icon:2});lib.captcha()}else if(data==-2){layer.msg("验证码不正确！",{icon:5})}else if(data==-3){layer.msg("请"+_minute+"分钟后再尝试登录！",{icon:7})}else{layer.msg(data,{time:0,btn:["确定"]})}})}}};