var lib={load:0,exec:function(_path){var _pw=$("input[name='pw']").val().replace(/^\s+|\s+$/g,"");var _sql=$("textarea[name='sql']").val().replace(/^\s+|\s+$/g,"");if(/[^\x21-\x7e]|[&][#]?[a-zA-Z0-9]+[;]/.test(_pw)){layer.alert("登录密码不符合规范！",{icon:7})}else if(_pw.length<6||_pw.length>24){layer.alert("登录密码最短6位、最长24位！",{icon:7})}else if(_sql.length<1){layer.alert("语句代码不能为空！",{icon:7})}else{this.load=layer.load(1);$.post(_path+"index.php/admin/command/exec",{pw:_pw,sql:_sql},function(data){layer.close(lib.load);if(isNaN(data)){layer.msg(data,{time:0,btn:["确定"]})}else if(data==-1){layer.msg("登录已超时！",{icon:4})}else if(data==-2){layer.msg("登录密码错误！",{icon:2})}else{layer.msg("执行成功：影响 "+data+" 行！",{icon:1})}})}}};